

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Creating a drag and drop template &#8212; Nengo 1.4 1.4 documentation</title>
    <link rel="stylesheet" href="../_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Running experiments" href="experiments.html" />
    <link rel="prev" title="Interactive plots layout files" href="layout.html" />
<link rel="stylesheet" type="text/css" href="../_static/custom.css">


  
   

  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="experiments.html" title="Running experiments"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="layout.html" title="Interactive plots layout files"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Nengo 1.4 1.4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Advanced usage</a> &#187;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar">
        <a href="
    ../index.html" class="text-logo">Nengo 1.4</a>
        
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Table Of Contents</h2>
  </div>
  <div class="sidebar-toc">
    
    
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../videos/index.html">Video tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Written tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demos/index.html">Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scripting/index.html">Scripting</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Advanced usage</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="layout.html">Interactive plots layout files</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Creating a drag and drop template</a></li>
<li class="toctree-l2"><a class="reference internal" href="experiments.html">Running experiments</a></li>
<li class="toctree-l2"><a class="reference internal" href="matlab.html">Running Nengo in Matlab</a></li>
<li class="toctree-l2"><a class="reference internal" href="large_ensembles.html">Generating large ensembles</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpu.html">Accelerating simulations with GPUs</a></li>
<li class="toctree-l2"><a class="reference internal" href="ipython_notebook.html">Integrating with IPython Notebook</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../nef_algorithm.html">The NEF Algorithm</a></li>
</ul>

    
  </div>
</div>
        
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="../search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="../index.html">Docs</a></li>
              
                <li><a href="index.html">Advanced usage</a></li>
              
              <li>Creating a drag and drop template</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <div class="section" id="creating-a-drag-and-drop-template">
<h1>Creating a drag and drop template<a class="headerlink" href="#creating-a-drag-and-drop-template" title="Permalink to this headline">Â¶</a></h1>
<p>Nengo comes with a variety of templates:
pre-built components that can be used to build your models.
These are the various icons
on the left side of the screen
that can be dragged in to your model.</p>
<p>These components are defined in <code class="docutils literal"><span class="pre">python/nef/templates</span></code>.
There is one file for each item,
and the following example uses <code class="docutils literal"><span class="pre">thalamus.py</span></code>.</p>
<p>The file starts with basic information,
including the full name (title) of the component,
the text to be used in the interface (label),
and an image to use as an icon.
The image should be stored in <code class="docutils literal"><span class="pre">/images/nengoIcons</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Thalamus&#39;</span>
<span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Thalamus&#39;</span>
<span class="n">icon</span> <span class="o">=</span> <span class="s1">&#39;thalamus.png&#39;</span>
</pre></div>
</div>
<p>Next, we define the parameters that should be set for the component.
These can be strings (str), integers (int),
real numbers (float), or checkboxes (bool).
For each one, we must indicate the name of the parameter,
the label text, the type, and the help text:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">params</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="s1">&#39;Name of thalamus&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;neurons&#39;</span><span class="p">,</span> <span class="s1">&#39;Neurons per dimension&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="s1">&#39;Number of neurons to use&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="s1">&#39;Dimensions&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="s1">&#39;Number of actions the thalamus can represent&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;useQuick&#39;</span><span class="p">,</span> <span class="s1">&#39;Quick mode&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span>
     <span class="s1">&#39;If true, the same distribution of neurons will be used for each action&#39;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Next, we need a function that will test if the parameters are valid.
This function will be given the parameters as a dictionary
and should return a string containing the error message
if there is an error, or not return anything if there is no error:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_params</span><span class="p">(</span><span class="n">net</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
       <span class="n">net</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">getNode</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
       <span class="k">return</span> <span class="s1">&#39;That name is already taken&#39;</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>Finally, we define the function that actually makes the component.
This function will be passed a <a class="reference internal" href="../python-api/nef/Network.html#nef.Network" title="nef.Network"><code class="xref py py-class docutils literal"><span class="pre">nef.Network</span></code></a> object
that corresponds to the network we have dragged the template into,
along with all of the parameters
specified in the <code class="docutils literal"><span class="pre">params</span></code> list above.
This script can now do
any scripting calculations desired to build the model:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">make</span><span class="p">(</span><span class="n">net</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Network array&#39;</span><span class="p">,</span> <span class="n">neurons</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">D</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">useQuick</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">thal</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">make_array</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">neurons</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span>
                          <span class="n">max_rate</span><span class="o">=</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">300</span><span class="p">),</span>
                          <span class="n">intercept</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                          <span class="n">radius</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                          <span class="n">encoders</span><span class="o">=</span><span class="p">[[</span><span class="mi">1</span><span class="p">]],</span>
                          <span class="n">quick</span><span class="o">=</span><span class="n">useQuick</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">addOne</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>

    <span class="n">net</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">thal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                <span class="n">func</span><span class="o">=</span><span class="n">addOne</span><span class="p">,</span>
                <span class="n">origin_name</span><span class="o">=</span><span class="s1">&#39;xBiased&#39;</span><span class="p">,</span>
                <span class="n">create_projection</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>The last step to make the template appear
in the Nengo interface
is to add it to the list in <code class="docutils literal"><span class="pre">python/nef/templates/__init__.py</span></code>.</p>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="layout.html" title="previous chapter (use the left arrow)">Interactive plots layout files</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="experiments.html" title="next chapter (use the right arrow)">Running experiments</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="experiments.html" title="Running experiments"
             >next</a> |</li>
        <li class="right" >
          <a href="layout.html" title="Interactive plots layout files"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Nengo 1.4 1.4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Advanced usage</a> &#187;</li> 
      </ul>
    </div>
  <script type="text/javascript">
    $(document).ready(function() {
      $(".toggle > *").hide();
      $(".toggle .header").show();
      $(".toggle .header").click(function() {
        $(this).parent().children().not(".header").toggle(400);
        $(this).parent().children(".header").toggleClass("open");
      });
    });
  </script>

<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="../_static/js/bootstrap.js"></script>
  <div class="footer">
    &copy; Copyright 2006-2017, Bryan Tripp & Centre for Theoretical Neuroscience, University of Waterloo. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  </body>
</html>